# AgentControl: Система централизованного управления клиентами
AgentControl — это легковесная система удалённого управления, предназначенная для сбора информации о рабочих станциях и отправки на них команд в корпоративной сети.

## Описание
AgentControl состоит из двух компонентов:

* Сервер — центральный узел, принимающий подключения, хранящий данные и управляющий клиентами.
* Клиент (агент) — приложение, запущенное на рабочей станции, которое отправляет информацию и выполняет команды.

## Система позволяет:

- Автоматически обнаруживать новые рабочие станции;
- Собирать подробную информацию об оборудовании;
- Отправлять команды на одну или группу станций (включая производные powershell);
- Управлять группами клиентов;
- Просматривать историю выполнения команд;
- Отслеживать онлайн-статус клиентов.

## Архитектура
- Протокол: TCP
- Язык: Go (Golang)
- Интерфейс: Веб-панель (HTML + Bootstrap)
- Хранение данных: JSON-файлы (не требуется база данных)

Реализация похожа на WebSocket по функциональности (дуплексная связь, постоянное соединение), но реализована вручную на базовом TCP.

## Важное

Управление через веб-интерфейс. Клиенты проходят этап одобрения (ручное подтверждение на сервере). Все данные передаются в текстовом виде (не шифруются). **Не использовать в незащищённых сетях**.

Сервер запускается на:

* TCP: :8080 — для подключения клиентов
* HTTP: :8081 — веб-интерфейс

## Запуск и сборка

```bash
#Для запуска go-servagent ИЛИ go-agent (из их папок)
go run .
#Для сборки
go build -o agnt.exe .
```
При первом запуске клиента будет создан файл **agent_id.json**, содержащий его *id* для системы. Пример файла:
```json
{"client_id":"agent-amd64-1750771957728113500"}
```

По мере подключения агентов к серверу, на сервере будут формироваться файлы
clients_pending.json (клиенты, ожидающие подтверждения) и clients_known.json (клиенты, которые были одобрены). При создании и редактировании групп используется client_groups.json.

Логи хранятся в logs/*client_id* для каждого отдельного клиента. Максимальное число записей - 100.

## TODO
* Больше команд
* Большая управляемость в интерфейсе
* Убрать легаси код